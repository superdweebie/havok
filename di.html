<!DOCTYPE html><html lang="en" ><HEAD >        <META charset="utf-8" ></META>        <TITLE >Havok by Zoop</TITLE>        <META http-equiv="X-UA-Compatible" content="IE=Edge" ></META>        <META name="viewport" content="width=device-width, initial-scale=1.0" ></META>        <META name="description" content="" ></META>        <META name="author" content="Tim Roediger" ></META>
        <LINK href="/favicon.png" type="image/png" rel="shortcut icon" ></LINK>        <LINK href="https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz:400,300,700" rel="stylesheet" type="text/css" ></LINK>
        <LINK id="themeSwtichLink" rel="stylesheet" href="/docs/zoop.css" ></LINK>        <SCRIPT src="/docs/docs.js" ></SCRIPT>                </HEAD><BODY id="docBody" >
        <DIV class="navbar top-nav navbar-fixed-top navbar-inverse" id="serverParsed_1_0" dir="ltr" widgetId="serverParsed_1_0" data-dojo-type="../widget/NavBar" data-dojo-props="&quot;_rendered&quot;:true" ><DIV class="navbar-inner" data-dojo-attach-point="containerNode" >    <A class="top-nav-toggle" data-havok-nav-bar-toggle="" >        <SPAN class="icon-bar" ></SPAN>        <SPAN class="icon-bar" ></SPAN>        <SPAN class="icon-bar" ></SPAN>    </A>    <A class="brand pull-left" href="./index.html" ><SVG xmlns:svg="http://www.w3.org/2000/svg" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 569 200" version="1.1" ><PATH style="fill:#32bfbd" d="m 157,169 c -3,0 -5,1 -7,1 0,0 0,0 0,0 -1,1 -2,2 -4,3 -1,1 -2,3 -2,4 -1,2 -2,5 -2,8 0,4 2,8 4,11 3,2 7,4 11,4 4,0 8,-2 10,-4 3,-3 4,-7 4,-11 0,-5 -1,-9 -4,-12 -2,-2 -6,-4 -10,-4 z m 0,7 c 2,0 3,1 4,2 1,2 2,4 2,6 0,3 -1,5 -2,7 -1,1 -2,2 -4,2 -2,0 -3,-1 -5,-2 -1,-2 -1,-4 -1,-6 0,-3 0,-5 1,-7 1,-1 3,-2 5,-2 z" /><PATH style="fill:#ce0000" d="M 31.6,-0.13 C 14.1,-0.13 0,14 0,31.5 L 0,124 c 0,17 14.1,31 31.6,31 l 467.4,0 c 0,0 1,0 2,0 l 68,40 -39,-74 0,-89.5 C 530,14 516,-0.13 499,-0.13 l -467.4,0 z" /><PATH style="fill:#ffffff" d="M 352 24.7 C 344 24.7 336 26 330 28.8 C 325 30.8 320 34 316 38.2 C 312 42.3 309 47.1 307 52.3 C 304 59.5 302 68.1 302 78.1 C 302 93.8 307 107 316 116 C 325 126 337 130 352 130 C 367 130 379 126 388 116 C 397 107 402 93.6 402 77.7 C 402 61.6 397 48.4 388 38.9 C 379 29.5 367 24.7 352 24.7 z M 28.8 26.3 L 28.8 129 L 56.4 129 L 56.4 87.8 L 84.9 87.8 L 84.9 129 L 112 129 L 112 26.3 L 84.9 26.3 L 84.9 63.3 L 56.4 63.3 L 56.4 26.3 L 28.8 26.3 z M 112 129 L 141 129 C 144 122 147 115 149 107 L 181 107 C 183 115 186 122 189 129 L 219 129 C 204 92.8 190 57.4 178 26.3 L 152 26.3 C 138 61.9 124 98 112 129 z M 207 26.3 C 220 62.4 232 98 244 129 L 270 129 C 283 93.2 296 56.8 307 26.3 L 277 26.3 C 271 46.4 264 66.5 257 86.5 C 250 66.5 244 46.4 237 26.3 L 207 26.3 z M 408 26.3 L 408 129 L 436 129 L 436 98 L 446 87.5 C 454 101 462 115 470 129 L 505 129 C 492 108 479 88.1 465 67.7 C 479 53.9 492 40.1 505 26.3 L 468 26.3 C 457 37.9 446 49.6 436 61.2 L 436 26.3 L 408 26.3 z M 352 49.5 C 359 49.5 364 51.6 368 56 C 371 60.3 374 67.1 374 77.2 C 374 87.5 371 94.5 367 99 C 363 103 359 106 352 106 C 346 106 341 103 337 99 C 333 94.3 330 87.4 330 77.5 C 330 67.3 333 60.4 336 56.1 C 340 51.7 345 49.5 352 49.5 z M 165 65 L 171 83 L 158 83 L 165 65 z " /><PATH style="fill:#e7e7e7" d="m 127,169 c -2,0 -4,1 -6,1 l 0,0 c -2,1 -3,2 -4,3 -1,1 -2,3 -3,4 -1,2 -1,5 -1,8 0,4 1,8 4,11 2,2 6,4 10,4 4,0 8,-1 11,-4 2,-3 4,-7 4,-11 0,-5 -2,-9 -4,-12 -3,-2 -7,-4 -11,-4 z m -99.5,1 c 0,10 0,21 0,29 3.5,0 7,0 10.5,0 3.6,0 5.7,0 6.8,0 1.6,0 3,0 4.2,-1 1.2,-1 2.1,-2 2.8,-4 0.7,-1 1,-2 1,-4 0,-2 -0.5,-3 -1.6,-5 -0.6,0 -1.4,-1 -2.3,-1 0.5,-1 1,-1 1.3,-2 0.8,-1 1.3,-3 1.3,-4 0,-2 -0.4,-3 -1.1,-4 -0.6,-1 -1.4,-2 -2.4,-3 -1,0 -2.1,-1 -3.3,-1 -1.2,0 -2.9,0 -5,0 -4.1,0 -8.1,0 -12.2,0 z m 23.6,0 c 3.6,6 7.3,11 11,17 0,4 0,8 0,12 2.6,0 5.3,0 7.9,0 0,-4 0,-8 0,-12 3.7,-6 7.3,-11 11,-17 -3.1,0 -6.2,0 -9.3,0 -1.8,3 -3.7,6 -5.5,9 -1.9,-3 -3.8,-6 -5.7,-9 -3.1,0 -6.3,0 -9.4,0 z m 38.9,0 c 0,2 0,4 0,7 3.8,0 7.6,0 11,0 -4,5 -8.3,10 -12.6,16 0,2 0,4 0,6 8.2,0 16.6,0 24.6,0 0,-2 0,-4 0,-7 -5,0 -9,0 -14.1,0 4.1,-5 9.1,-11 13.1,-16 0,-2 0,-4 0,-6 -7,0 -14.5,0 -22,0 z m 83,0 c 0,10 0,21 0,29 3,0 5,0 8,0 0,-3 0,-6 0,-10 l 2,0 c 3,0 5,0 6,0 1,-1 2,-1 3,-2 2,-1 2,-2 3,-3 1,-1 1,-3 1,-5 0,-2 0,-4 -2,-6 -1,-1 -2,-2 -4,-3 0,0 0,0 0,0 -2,0 -4,0 -7,0 -3,0 -7,0 -10,0 z m -46,6 c 2,0 4,1 5,2 1,2 1,4 1,6 0,3 0,5 -1,7 -1,1 -3,2 -5,2 -2,0 -3,-1 -4,-2 -1,-2 -2,-4 -2,-6 0,-3 1,-5 2,-7 1,-1 2,-2 4,-2 z m -91.5,1 1.9,0 c 2.6,0 4.2,0 4.5,0 0.1,0 0.1,0 0.1,0 0.7,0 1,0 1.2,0 0.3,1 0.4,1 0.4,2 0,0 -0.1,1 -0.4,1 -0.3,0 -0.8,0 -1.5,0 -0.3,0 -1.7,1 -3.8,1 l -2.4,0 0,-4 z m 145.5,0 1,0 c 2,0 4,0 4,0 1,0 1,0 1,1 1,0 1,1 1,1 0,1 0,1 0,2 -1,0 -1,1 -2,1 0,0 -1,0 -3,0 l -2,0 z m -145.5,11 3.2,0 c 2.5,0 4.1,0 4.4,0 0.6,0 0.9,0 1.1,1 0.3,0 0.4,0 0.4,1 0,1 -0.1,1 -0.4,1 -0.3,1 -0.7,1 -1.3,1 l 0,0 c -0.3,0 -1.6,0 -3.5,0 l -3.9,0 z" /></SVG></A>    <DIV data-havok-nav-bar-toggle-target="" class="pull-right" >        <UL data-dojo-attach-point="containerNode" class="nav" dir="ltr" id="topNav" widgetId="topNav" data-dojo-type="../widget/NavBarLinks" data-dojo-props="&quot;id&quot;:&quot;topNav&quot;,&quot;_rendered&quot;:true" >            <LI data-havok-handler-id="0" ><A href="/index.html" data-havok-click-target="true" >Home</A></LI>            <LI data-havok-handler-id="1" ><A href="/getting-started.html" data-havok-click-target="true" >Get started</A></LI>            <LI data-havok-handler-id="2" ><A href="/widgets.html" data-havok-click-target="true" >Widgets</A></LI>            <LI data-havok-handler-id="3" ><A href="/forms.html" data-havok-click-target="true" >Forms</A></LI>            <LI data-havok-handler-id="4" ><A href="/stores.html" data-havok-click-target="true" >Stores</A></LI>            <LI data-havok-handler-id="5" ><A href="/data-quality.html" data-havok-click-target="true" >Data Quality</A></LI>            <LI data-havok-handler-id="6" ><A href="/services.html" data-havok-click-target="true" >Services</A></LI>            <LI data-havok-handler-id="7" ><A href="/di.html" data-havok-click-target="true" >DI</A></LI>            <LI data-havok-handler-id="8" ><A href="/builds.html" data-havok-click-target="true" >Builds</A></LI>            <LI data-havok-handler-id="9" ><A href="/api.html" data-havok-click-target="true" >API</A></LI>            <LI data-havok-handler-id="10" ><A href="/dev.html" data-havok-click-target="true" >Dev</A></LI>        </UL>        <DIV data-dojo-attach-point="containerNode" class="btn-group theme-switch" id="serverParsed_9_0" dir="ltr" widgetId="serverParsed_9_0" data-dojo-type="docs/ThemeSwitch" data-dojo-props="&quot;_rendered&quot;:true" ><BUTTON class="btn-inverse btn" data-havok-handler-id="0" ><IMG src="/favicon.png" /></BUTTON><BUTTON class="btn-inverse btn" data-havok-handler-id="1" ><IMG src="/bootstrap.png" /></BUTTON></DIV>    </DIV></DIV></DIV>
        <DIV class="feedback" id="serverParsed_1_1" dir="ltr" widgetId="serverParsed_1_1" data-dojo-type="docs/Feedback" data-dojo-props="&quot;bugLink&quot;:&quot;http://github.com/zoopcommerce/havok/issues&quot;,&quot;issuesLink&quot;:&quot;http://github.com/zoopcommerce/havok/issues&quot;,&quot;forkLink&quot;:&quot;http://github.com/zoopcommerce/havok/fork&quot;,&quot;_rendered&quot;:true" >    <A class="handle" data-dojo-attach-event="click: onClick" >        <I class="fa fa-bullhorn" ></I>        <DIV class="handle-text" >feedback</DIV>    </A>    <DIV class="feedback-links" >        <TABLE >            <TR >                <TD ><I class="fa fa-bug" ></I></TD>                <TD ><A href="http://github.com/zoopcommerce/havok/issues" >Report a bug</A></TD>            </TR>            <TR >                <TD ><I class="fa fa-comment" ></I></TD>                <TD ><A href="http://github.com/zoopcommerce/havok/issues" >Make a suggestion</A></TD>            </TR>            <TR >                <TD ><I class="fa fa-code-fork" ></I></TD>                <TD ><A href="http://github.com/zoopcommerce/havok/fork" >Fork on Github</A></TD>            </TR>        </TABLE>     </DIV></DIV>
        <MAIN >                <DIV class="container-fluid" >    <DIV class="row-fluid" >        <DIV class="span12 well" >            <DIV class="head" >                <H1 >Dependency Injection</H1>                <P >Your gateway to loosely coupled and flexible code.</P>            </DIV>        </DIV>    </DIV>    <DIV class="row-fluid" >        <DIV class="span3" >                            <UL data-dojo-attach-point="containerNode" class="nav nav-list well" id="serverParsed_6_0" dir="ltr" widgetId="serverParsed_6_0" data-dojo-type="docs/SideNav" data-dojo-props="&quot;_rendered&quot;:true" ><LI data-havok-handler-id="0" data-havok-spy-target="overview" ><A role="navitem" href="#overview" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> Overview</A></LI><LI data-havok-handler-id="1" data-havok-spy-target="config-format" ><A role="navitem" href="#config-format" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> Config Format</A></LI><LI data-havok-handler-id="2" data-havok-spy-target="base" ><A role="navitem" href="#base" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> base</A></LI><LI data-havok-handler-id="3" data-havok-spy-target="params" ><A role="navitem" href="#params" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> params</A></LI><LI data-havok-handler-id="4" data-havok-spy-target="gets" ><A role="navitem" href="#gets" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> gets</A></LI><LI data-havok-handler-id="5" data-havok-spy-target="proxies" ><A role="navitem" href="#proxies" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> proxies</A></LI><LI data-havok-handler-id="6" data-havok-spy-target="directives" ><A role="navitem" href="#directives" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> Directives</A></LI><LI data-havok-handler-id="7" data-havok-spy-target="injecting-arrays" ><A role="navitem" href="#injecting-arrays" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> Injecting Arrays</A></LI><LI data-havok-handler-id="8" data-havok-spy-target="proxy-objects" ><A role="navitem" href="#proxy-objects" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> Proxy Objects</A></LI><LI data-havok-handler-id="9" data-havok-spy-target="plugins" ><A role="navitem" href="#plugins" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> Plugins</A></LI><LI data-havok-handler-id="10" data-havok-spy-target="build" ><A role="navitem" href="#build" ><I style="line-height:20px" class="fa fa-chevron-right pull-right" ></I> Build</A></LI></UL>                    </DIV>        <DIV class="span9" id="mainContent" >                <SECTION id="overview" title="Overview" ><DIV class="well" ><H1 >Overview</H1><P class="lead" >So, what is dependency injection...</P>
<P >Dependency Injection removes what can sometimes be the mess of configuring modules and the resources they need to consume from the normal flow of code. Instead of long constructor functions and complex constructor arguments, configuration is defined in a confie module, and the di container does all the wiring up for you. It removes hard dependencies from code, and configuration can be easily altered for different needs.</P>
<H2 >Example</H2><P >When the <CODE >havok/exception/handler</CODE> renders an exception to the console, it uses <CODE >havok/exception/ConsoleLogRenderer</CODE>. If you write your own improved renderer, you can use it with this simple change to the config:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="pln" >di</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="str" >'havok/exception/Handler'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >        gets</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L3" ><SPAN class="pln" >            consoleLogRenderer</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/new/Renderer'</SPAN></LI><LI class="L4" ><SPAN class="pln" >        </SPAN><SPAN class="pun" >},</SPAN></LI><LI class="L5" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L6" ><SPAN class="pun" >}</SPAN></LI></OL></PRE>
<H2 >Creation</H2>
<P >There can be multiple di containers. A di container is created like this:
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="kwd" >require</SPAN><SPAN class="pun" >([</SPAN><SPAN class="str" >'havok/di/Di'</SPAN><SPAN class="pun" >],</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >function</SPAN><SPAN class="pun" >(</SPAN><SPAN class="typ" >Di</SPAN><SPAN class="pun" >){</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >var</SPAN><SPAN class="pln" > di </SPAN><SPAN class="pun" >=</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >new</SPAN><SPAN class="pln" > </SPAN><SPAN class="typ" >Di</SPAN><SPAN class="pun" >({</SPAN><SPAN class="com" >/*my config*/</SPAN><SPAN class="pun" >});</SPAN></LI><LI class="L2" ><SPAN class="pun" >}</SPAN></LI></OL></PRE>
<H2 >Config</H2>
</P><P >The behaviour of the di container is controlled by the config object.</P>
<P >The config object can be explicitly passed to the constructor:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="kwd" >var</SPAN><SPAN class="pln" > di </SPAN><SPAN class="pun" >=</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >new</SPAN><SPAN class="pln" > </SPAN><SPAN class="typ" >Di</SPAN><SPAN class="pun" >({</SPAN><SPAN class="com" >/*put configuration here*/</SPAN><SPAN class="pun" >});</SPAN></LI></OL></PRE>
The config object can be set after the di container has been created:

<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="pln" >di</SPAN><SPAN class="pun" >.</SPAN><SPAN class="pln" >setConfig</SPAN><SPAN class="pun" >({</SPAN><SPAN class="com" >/*put configuration here*/</SPAN><SPAN class="pun" >});</SPAN></LI></OL></PRE>
<P >If no config object is supplied to the constructor, the <CODE >di</CODE> key from the dojo config object will be used.</P>
<P >The a config object can be merged with the existing di config using the mergeConfig method:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="pln" >di</SPAN><SPAN class="pun" >.</SPAN><SPAN class="pln" >mergeConfig</SPAN><SPAN class="pun" >({</SPAN><SPAN class="com" >/*put config to merge here*/</SPAN><SPAN class="pun" >});</SPAN></LI></OL></PRE>
<P >The config for an individual identifier can be set with:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="pln" >di</SPAN><SPAN class="pun" >.</SPAN><SPAN class="pln" >setIdentifierConfig</SPAN><SPAN class="pun" >(</SPAN><SPAN class="pln" >identifier</SPAN><SPAN class="pun" >,</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN><SPAN class="com" >/* put config here*/</SPAN><SPAN class="pun" >});</SPAN></LI></OL></PRE>
<P >For docs of the config format, see below.</P>
<H2 >sharedDi!</H2>
<P >Other Havok use one common di container configured with the dojo config object. This allows the di config to be merged by <CODE >havok/config/manager</CODE>.</P>
<P >To get the shared di container use the AMD plugin:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="kwd" >require</SPAN><SPAN class="pun" >([</SPAN><SPAN class="str" >'havok/di/sharedDi!'</SPAN><SPAN class="pun" >],</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >function</SPAN><SPAN class="pun" >(</SPAN><SPAN class="pln" >sharedDi</SPAN><SPAN class="pun" >){</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="com" >//do something</SPAN></LI><LI class="L2" ><SPAN class="com" >}</SPAN></LI></OL></PRE>
<H2 >Retrieving objects</H2>
<P >To fetch an object from the di you need to pass the di an identifier. The di will look the identifier up in the config, do any injections, and pass the result back to you. An object can be fetched from the di with three different methods:</P>
<TABLE class="table table-bordered table-striped" >    <THEAD >        <TR >            <TH style="width: 100px;" >name</TH>            <TH >description</TH>        </TR>    </THEAD>    <TBODY >        <TR >            <TD >di.get(identifier)</TD>            <TD >Simple and clear. It gets an object.</TD>        </TR>        <TR >            <TD >di.create(identifier)</TD>            <TD >Creates an object, ignoring any object already cached with the identifier.</TD>        </TR>        <TR >            <TD >di.proxy(identifier)</TD>            <TD >Gets a proxy, or a stand-in for the object. Good for lazy loading.</TD>        </TR>    </TBODY></TABLE>
<P >The differences between these methods are explained more below.</P></DIV></SECTION>    <SECTION id="config-format" title="Config Format" ><DIV class="well" ><H1 >Config Format</H1>
<P >The property names of the config object are identifiers. They are used to retrieve configured objects from the di. The properies themselves define how the object will be injected. The property object can have the following sub properties. All sub properties are optional:</P>
<TABLE class="table table-bordered table-striped" >    <THEAD >        <TR >            <TH style="width: 100px;" >name</TH>            <TH style="width: 50px;" >type</TH>            <TH >description</TH>        </TR>    </THEAD>    <TBODY >        <TR >            <TD >base</TD>            <TD >string</TD>            <TD >Specify which module will be the base, or foundation for injection.</TD>        </TR>        <TR >            <TD >params</TD>            <TD >object</TD>            <TD >Specifies static parameters to be injected.</TD>        </TR>        <TR >            <TD >gets</TD>            <TD >object</TD>            <TD >Specifies objects that should be retrieved through the di and injected.</TD>        </TR>        <TR >            <TD >proxies</TD>            <TD >object</TD>            <TD >Specifies object that should be proxied by the di and injected.</TD>        </TR>        <TR >            <TD >directives</TD>            <TD >object</TD>            <TD >A set of flags that give fine grained control over di injection behaviour.</TD>        </TR>        <TR >            <TD >proxyMethods</TD>            <TD >array</TD>            <TD >An array of methods that should be available when creating a proxy.</TD>        </TR>    </TBODY></TABLE></DIV></SECTION>    <SECTION id="base" title="base" ><DIV class="well" ><H1 >base</H1><P class="lead" >Tell di which object injections should be applied to.</P>
<P >The base defines which object the di will inject. For example, with this config <CODE >di.get('myIdentifier')</CODE> will get an instance of <CODE >my/module</CODE> with the <CODE >color</CODE> property set to blue.</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'myIdentifier'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >base</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/module'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L2" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L3" ><SPAN class="pln" >        color</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'blue'</SPAN></LI><LI class="L4" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L5" ><SPAN class="pun" >},</SPAN></LI></OL></PRE>
<H3 >Ommited Base</H3><P >If the base is ommitted, the identifier is assumed to be the base. Eg:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/module'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >        color</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'blue'</SPAN></LI><LI class="L3" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L4" ><SPAN class="pun" >},</SPAN></LI></OL></PRE>
<H3 >Chaining</H3><P >If base is set to a string, the base will be fetched through the di. This allows chaining. </P>
<P >For example, with this config <CODE >di.get('myIdentifier')</CODE> will get an instance of <CODE >my/module</CODE> with the <CODE >color</CODE> property set to blue and <CODE >size</CODE> property set to big.</P><PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/module'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >        color</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'blue'</SPAN></LI><LI class="L3" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L4" ><SPAN class="pun" >},</SPAN></LI><LI class="L5" ><SPAN class="str" >'myIdentifier: {</SPAN></LI><LI class="L6" ><SPAN class="str" >    base: '</SPAN><SPAN class="kwd" >my</SPAN><SPAN class="pun" >/</SPAN><SPAN class="kwd" >module</SPAN><SPAN class="str" >',</SPAN></LI><LI class="L7" ><SPAN class="str" >    params: {</SPAN></LI><LI class="L8" ><SPAN class="str" >        size: '</SPAN><SPAN class="pln" >big</SPAN><SPAN class="str" >'</SPAN></LI><LI class="L9" ><SPAN class="str" >    }</SPAN></LI><LI class="L0" ><SPAN class="str" >}</SPAN></LI></OL></PRE>
<H3 >Identifier without config</H3><P >If an identifier is not configured, the di will assume it is a module, and just load that module using <CODE >require</CODE>.</P>
<H3 >Object base</H3>
<P >If the base is an object, rather than a string, that object will be used for injection.</P>
<P >For example, with this config <CODE >di.get('myIdentifier')</CODE> will return <CODE >{size: 'big'}</CODE>.</P><PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'myIdentifier: {</SPAN></LI><LI class="L1" ><SPAN class="str" >    base: {},</SPAN></LI><LI class="L2" ><SPAN class="str" >    params: {</SPAN></LI><LI class="L3" ><SPAN class="str" >        size: '</SPAN><SPAN class="pln" >big</SPAN><SPAN class="str" >'</SPAN></LI><LI class="L4" ><SPAN class="str" >    }</SPAN></LI><LI class="L5" ><SPAN class="str" >}</SPAN></LI></OL></PRE></DIV></SECTION>    <SECTION id="params" title="params" ><DIV class="well" ><H1 >params</H1>
<P class="lead" >Scalar values to be injected</P>
<P >Any property set in the <CODE >params</CODE> object will be set on the returned object.</P>
<P >For example:</P><PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/module'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >        color</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'blue'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L3" ><SPAN class="pln" >        size</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'big'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L4" ><SPAN class="pln" >        number</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="lit" >6</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L5" ><SPAN class="pln" >        something</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN><SPAN class="pln" >blah</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="lit" >4</SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L6" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L7" ><SPAN class="pun" >}</SPAN></LI></OL></PRE></DIV></SECTION>    <SECTION id="gets" title="gets" ><DIV class="well" ><H1 >gets</H1><P class="lead" >Objects to be injected</P>
<H2 >Simple get</H2><P >Any property set in the <CODE >gets</CODE> object will be fetched through the di and then set on the returned object.</P>
<P >For example, with this config <CODE >di.get('my/zoo')</CODE> will return an instance of <CODE >my/zoo</CODE> populated with one lion and two tigers. The two tigers will have different names.</P><PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/zoo'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    gets</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >       lion</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/lion/module'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L3" ><SPAN class="pln" >       tiger1</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'tiger1'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L4" ><SPAN class="pln" >       tiger2</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'tiger2</SPAN></LI><LI class="L5" ><SPAN class="str" >    }</SPAN></LI><LI class="L6" ><SPAN class="str" >},</SPAN></LI><LI class="L7" ><SPAN class="str" >'</SPAN><SPAN class="pln" >tiget1</SPAN><SPAN class="str" >': {</SPAN></LI><LI class="L8" ><SPAN class="str" >    base: '</SPAN><SPAN class="kwd" >my</SPAN><SPAN class="pun" >/</SPAN><SPAN class="pln" >tiger</SPAN><SPAN class="pun" >/</SPAN><SPAN class="kwd" >module</SPAN><SPAN class="str" >',</SPAN></LI><LI class="L9" ><SPAN class="str" >    params: {</SPAN></LI><LI class="L0" ><SPAN class="str" >        name: '</SPAN><SPAN class="typ" >Toby</SPAN><SPAN class="str" >'</SPAN></LI><LI class="L1" ><SPAN class="str" >    }</SPAN></LI><LI class="L2" ><SPAN class="str" >},</SPAN></LI><LI class="L3" ><SPAN class="str" >'</SPAN><SPAN class="pln" >tiget1</SPAN><SPAN class="str" >': {</SPAN></LI><LI class="L4" ><SPAN class="str" >    base: '</SPAN><SPAN class="kwd" >my</SPAN><SPAN class="pun" >/</SPAN><SPAN class="pln" >tiger</SPAN><SPAN class="pun" >/</SPAN><SPAN class="kwd" >module</SPAN><SPAN class="str" >',</SPAN></LI><LI class="L5" ><SPAN class="str" >    params: {</SPAN></LI><LI class="L6" ><SPAN class="str" >        name: '</SPAN><SPAN class="typ" >Alice</SPAN><SPAN class="str" >'</SPAN></LI><LI class="L7" ><SPAN class="str" >    }</SPAN></LI><LI class="L8" ><SPAN class="str" >}</SPAN></LI></OL></PRE>
<H2 >Inline config</H2>
<P >Rather than specifying a string in a get, you can use an inline config to make the code more consise and easier to read. The example above could be rewritten as:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/zoo'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    gets</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >       lion</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/lion/module'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L3" ><SPAN class="pln" >       tiger1</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L4" ><SPAN class="pln" >            </SPAN><SPAN class="kwd" >base</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/tiger/module'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L5" ><SPAN class="pln" >            </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L6" ><SPAN class="pln" >                name</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'Toby'</SPAN></LI><LI class="L7" ><SPAN class="pln" >       </SPAN><SPAN class="pun" >},</SPAN></LI><LI class="L8" ><SPAN class="pln" >       tiger2</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L9" ><SPAN class="pln" >            </SPAN><SPAN class="kwd" >base</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/tiger/module'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L0" ><SPAN class="pln" >            </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >                name</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'Alice'</SPAN></LI><LI class="L2" ><SPAN class="pln" >       </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L3" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L4" ><SPAN class="pun" >}</SPAN></LI></OL></PRE></DIV></SECTION>    <SECTION id="proxies" title="proxies" ><DIV class="well" ><H1 >proxies</H1><P class="lead" >Objects to proxy, then inject</P>
<P >Proxy objects can be injected with exactly the same synatx as <CODE >gets</CODE>, the only difference being a proxy is injected instead of the actual object.</P>
<P >For example:</P><PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/zoo'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    proxy</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >       lion</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/lion/module'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L3" ><SPAN class="pln" >       tiger1</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L4" ><SPAN class="pln" >            </SPAN><SPAN class="kwd" >base</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/tiger/module'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L5" ><SPAN class="pln" >            </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L6" ><SPAN class="pln" >                name</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'Toby'</SPAN></LI><LI class="L7" ><SPAN class="pln" >       </SPAN><SPAN class="pun" >},</SPAN></LI><LI class="L8" ><SPAN class="pln" >       tiger2</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L9" ><SPAN class="pln" >            </SPAN><SPAN class="kwd" >base</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/tiger/module'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L0" ><SPAN class="pln" >            </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >                name</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'Alice'</SPAN></LI><LI class="L2" ><SPAN class="pln" >       </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L3" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L4" ><SPAN class="pun" >}</SPAN></LI></OL></PRE>
<P >For information on proxy object and why you might use them, see the Proxy Objects section.</P></DIV></SECTION>    <SECTION id="directives" title="Directives" ><DIV class="well" ><H1 >directives</H1><P class="lead" >Fine grained control over fetching objects</P>
<P >There are several possible directives. Each is a boolean flag.</P>
<P >The default directives are:</P><PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="pln" >directives</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    declare</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >false</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L2" ><SPAN class="pln" >    cache</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >true</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L3" ><SPAN class="pln" >    clone</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >false</SPAN></LI><LI class="L4" ><SPAN class="pun" >};</SPAN></LI></OL></PRE>
<H2 >cache</H2>
<P >The di container automatically caches objects. If you want to recreate the object every time <CODE >di.get()</CODE> is called, then set <CODE >cache: false</CODE>.
</P><P >For example:</P><PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/module'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    directives</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >        cache</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >false</SPAN></LI><LI class="L3" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L4" ><SPAN class="pun" >}</SPAN></LI></OL></PRE>
<H2 >declare</H2>
<P >If the declare directive is set to true, then <CODE >dojo/_base/declare</CODE> will be used on the injected object, and a contstructor returned rather than an istance. This is especially useful for injecting widgets that are created by the parser. eg if this config is set:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'object1'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >base</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'dijit/Form/TextBox'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L2" ><SPAN class="pln" >    directives</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L3" ><SPAN class="pln" >        declare</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >true</SPAN></LI><LI class="L4" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >},</SPAN></LI><LI class="L5" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L6" ><SPAN class="pln" >        a</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="lit" >1</SPAN></LI><LI class="L7" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L8" ><SPAN class="pun" >}</SPAN></LI></OL></PRE>
<P >Then this markup could be used:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="tag" >&lt;script</SPAN><SPAN class="pln" > </SPAN><SPAN class="atn" >type</SPAN><SPAN class="pun" >=</SPAN><SPAN class="atv" >"text/javascript"</SPAN><SPAN class="tag" >&gt;</SPAN></LI><LI class="L1" ><SPAN class="pln" >    require</SPAN><SPAN class="pun" >([</SPAN></LI><LI class="L2" ><SPAN class="pln" >        </SPAN><SPAN class="str" >'dojo/parser'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L3" ><SPAN class="pln" >        </SPAN><SPAN class="str" >'get!object1'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L4" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >],</SPAN></LI><LI class="L5" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >function</SPAN><SPAN class="pun" >(</SPAN><SPAN class="pln" >parser</SPAN><SPAN class="pun" >){</SPAN></LI><LI class="L6" ><SPAN class="pln" >        parser</SPAN><SPAN class="pun" >.</SPAN><SPAN class="pln" >parse</SPAN><SPAN class="pun" >()</SPAN></LI><LI class="L7" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >})</SPAN></LI><LI class="L8" ><SPAN class="tag" >&lt;/script&gt;</SPAN></LI><LI class="L9" ><SPAN class="pln" > </SPAN></LI><LI class="L0" ><SPAN class="tag" >&lt;div</SPAN><SPAN class="pln" > </SPAN><SPAN class="atn" >data-dojo-type</SPAN><SPAN class="pln" >: </SPAN><SPAN class="atv" >'object1'</SPAN><SPAN class="tag" >&gt;&lt;/div&gt;</SPAN></LI></OL></PRE>
<P >This would result in a TextBox with a = 1.</P>
<H2 >clone</H2>
<P >For objects that do not have a prototype, the base is whatever is returned by the AMD loaded. If you want to clone the base before injection, set <CODE >clone: true</CODE>.</P>
<P >For example:</P><PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/module'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    directives</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >        clone</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >false</SPAN></LI><LI class="L3" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L4" ><SPAN class="pun" >}</SPAN></LI></OL></PRE></DIV></SECTION>    <SECTION id="injecting-arrays" title="Injecting Arrays" ><DIV class="well" ><H1 >Injecting Arrays</H1>
<P >Arrays of values and objects can be injected, and elements from those arrays can be defined in different parts of the config.</P>
<P >This config will result in a <CODE >my/zoo</CODE> instance with an array of six different animals:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/zoo'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="kwd" >params</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >        animals</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >[</SPAN></LI><LI class="L3" ><SPAN class="pln" >            </SPAN><SPAN class="str" >'cobra'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L4" ><SPAN class="pln" >            </SPAN><SPAN class="str" >'crocodile'</SPAN></LI><LI class="L5" ><SPAN class="pln" >        </SPAN><SPAN class="pun" >]</SPAN></LI><LI class="L6" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >},</SPAN></LI><LI class="L7" ><SPAN class="pln" >    gets</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L8" ><SPAN class="pln" >        animals</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >[</SPAN></LI><LI class="L9" ><SPAN class="pln" >            </SPAN><SPAN class="str" >'lion1'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L0" ><SPAN class="pln" >            </SPAN><SPAN class="str" >'lion2'</SPAN></LI><LI class="L1" ><SPAN class="pln" >        </SPAN><SPAN class="pun" >]</SPAN></LI><LI class="L2" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >},</SPAN></LI><LI class="L3" ><SPAN class="pln" >    proxies</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L4" ><SPAN class="pln" >        animals</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >[</SPAN></LI><LI class="L5" ><SPAN class="pln" >            </SPAN><SPAN class="str" >'tiger'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L6" ><SPAN class="pln" >            </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L7" ><SPAN class="pln" >                </SPAN><SPAN class="kwd" >base</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'penguin'</SPAN><SPAN class="pun" >,</SPAN></LI><LI class="L8" ><SPAN class="pln" >                name</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'Percy'</SPAN></LI><LI class="L9" ><SPAN class="pln" >            </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L0" ><SPAN class="pln" >        </SPAN><SPAN class="pun" >]</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L2" ><SPAN class="pun" >}</SPAN></LI></OL></PRE>
</DIV></SECTION>    <SECTION id="proxy-objects" title="Proxy Objects" ><DIV class="well" ><H1 >Proxy Objects</H1>
<P >It's all great and wonderful to inject objects here and there, but what if you have an object that only might be used? You don't want to go through the overhead of creating, particularly if it requires extra code to be loaded from the server if it is only rarely used. It's time to use a Proxy.</P>
<P >A proxy object is a stand in for the real object. Di can create a proxy, and the real object will only be created when the proxy is first used. Proxy object will be injected with their own configured <CODE >params</CODE> and <CODE >proxies</CODE> when the proxy is created. However, they will not be injected with any configured <CODE >gets</CODE> until first method call on the proxy.</P>
<P >When creating a proxy, the di needs to be told what methods are available for proxying. This is what the <CODE >proxyMethods</CODE> configuration is used for.</P>
<P >For example, with this config <CODE >di.get('my/zoo')</CODE> will return an instance of <CODE >my/zoo</CODE> populated with a proxy lion. The <CODE >my/lion/module</CODE> will not be created until <CODE >zoo.lion.roar()</CODE> is called.</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="str" >'my/zoo'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L1" ><SPAN class="pln" >    proxy</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L2" ><SPAN class="pln" >       lion</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="str" >'my/lion/module'</SPAN></LI><LI class="L3" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >}</SPAN></LI><LI class="L4" ><SPAN class="pun" >}</SPAN></LI><LI class="L5" ><SPAN class="str" >'my/lion/module'</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >{</SPAN></LI><LI class="L6" ><SPAN class="pln" >    proxyMethods</SPAN><SPAN class="pun" >:</SPAN><SPAN class="pln" > </SPAN><SPAN class="pun" >[</SPAN></LI><LI class="L7" ><SPAN class="pln" >        </SPAN><SPAN class="str" >'roar'</SPAN></LI><LI class="L8" ><SPAN class="pln" >    </SPAN><SPAN class="pun" >]</SPAN></LI><LI class="L9" ><SPAN class="pun" >}</SPAN></LI></OL></PRE>
<P >Note: Proxied methods may return a Deferred which will resolve to the proxied method's result. This is because fetching the insance through the di may involve asyncronous loading.</P>
<P >Every proxy also has a <CODE >diGet()</CODE> function that can force the di to load the proxy's underlying instance.</P></DIV></SECTION>    <SECTION id="plugins" title="Plugins" ><DIV class="well" ><H1 >Plugins</H1>
<P >There are two AMD plugins provided which mean you can largely forget di in your actual code.</P>
<H2 >get!</H2>
<P >Using <CODE >havok/get!my/module</CODE> will return an instance of <CODE >my/module</CODE> retrieved through the shared di container. Eg:</P>
<P >When creating a proxy, the di needs to be told what methods are available for proxying. This is what the <CODE >proxyMethods</CODE> configuration is used for.</P>
<P >For example, with this config <CODE >di.get('my/zoo')</CODE> will return an instance of <CODE >my/zoo</CODE> populated with a proxy lion. The <CODE >my/lion/module</CODE> will not be created until <CODE >zoo.lion.roar()</CODE> is called.</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="kwd" >require</SPAN><SPAN class="pun" >([</SPAN><SPAN class="str" >'havok/get!my/module'</SPAN><SPAN class="pun" >],</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >function</SPAN><SPAN class="pun" >(</SPAN><SPAN class="pln" >myModule</SPAN><SPAN class="pun" >){</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="com" >//do something</SPAN></LI><LI class="L2" ><SPAN class="com" >})</SPAN></LI></OL></PRE>
<H2 >proxy!</H2>
<P ><CODE >havok/proxy!</CODE> works exactly the same as <CODE >havok/get!</CODE>, it just returns a proxy instead:</P>
<PRE class="prettyprint linenums" ><OL class="linenums" ><LI class="L0" ><SPAN class="kwd" >require</SPAN><SPAN class="pun" >([</SPAN><SPAN class="str" >'havok/proxy!my/module'</SPAN><SPAN class="pun" >],</SPAN><SPAN class="pln" > </SPAN><SPAN class="kwd" >function</SPAN><SPAN class="pun" >(</SPAN><SPAN class="pln" >myModule</SPAN><SPAN class="pun" >){</SPAN></LI><LI class="L1" ><SPAN class="pln" >    </SPAN><SPAN class="com" >//do something</SPAN></LI><LI class="L2" ><SPAN class="com" >})</SPAN></LI></OL></PRE></DIV></SECTION>    <SECTION id="build" title="Build" ><DIV class="well" ><H1 >Build</H1>
<P >When doing dojo builds, it is strongly recommended that you use the havok build tools. If you do, di plugins will resolve at build time with the following behaviour:</P>
<H2 >havok/get!</H2>
<P >Will include <CODE >havok/di/di</CODE>, and the module requested by get!, and any modules in the gets property of the config for that object.</P>
<H2 >havok/proxy!</H2>
<P >Will include <CODE >havok/di/di</CODE>, but not the module requested by proxy!.</P>
<H2 >havok/di/sharedDi!</H2>
<P >Will include <CODE >havok/di/di</CODE>.</P></DIV></SECTION>        </DIV>    </DIV></DIV>        </MAIN>
        <SPAN class="" id="serverParsed_7_0" dir="ltr" widgetId="serverParsed_7_0" data-dojo-type="../widget/Overlay" data-dojo-props="&quot;target&quot;:&quot;docBody&quot;,&quot;_rendered&quot;:true" >    <SPAN class="hide overlay  main-overlay" data-dojo-attach-point="overlay" >        <SPAN class="overlay-backdrop" data-dojo-attach-point="backdrop" ></SPAN>        <SPAN class="overlay-content" data-dojo-attach-point="containerNode" >            <DIV ><SPAN class="icon-spinner icon-spin" ></SPAN></DIV><P >Loading more havok...</P>        </SPAN>    </SPAN></SPAN>
        <FOOTER class="footer" >            <DIV class="container" >                <P >Created by <A href="http://github.com/superdweebie" >@superdweebie</A> and <A href="http://github.com/crimsonronin" >@crimsonronin</A>.</P>                <P >Code licensed under MIT.</P>                <P >Built on the shoulders of giants <A href="http://twitter.github.io/bootstrap" >bootstrap</A> and <A href="http://dojotoolkit.org" >dojo</A>.</P>                <UL class="footer-links" >                    <LI ><A href="http://zoopcommerce.com" >Zoop</A></LI>                    <LI class="muted" >·</LI>                    <LI ><A href="https://github.com/zoopcommerce/havok/issues?state=open" >Issues</A></LI>                    <LI class="muted" >·</LI>                    <LI ><A href="https://github.com/zoopcommerce/havok/blob/master/CHANGELOG.md" >Changelog</A></LI>                </UL>            </DIV>        </FOOTER>    </BODY></html>